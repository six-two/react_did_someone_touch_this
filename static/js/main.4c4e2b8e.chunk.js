(this.webpackJsonpreact_did_someone_touch_this=this.webpackJsonpreact_did_someone_touch_this||[]).push([[0],{27:function(e,t,a){e.exports=a(47)},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(3),s=a.n(o),c=a(8),l=a(1),i=a(13),u=[];function m(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=u.length,n={number:a,name:e,canSkip:t};return u.push(n),a}var p=m("Before photo"),g=m("Do your thing",!0),f=m("After photo"),h=m("Compare photos"),E=u;function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e>=0&&e<E.length;if(t&&!a)throw new Error("Step is not in bounds: ".concat(e));return a}function b(e){d(e,!0);for(var t=e;t<E.length;t++)if(!E[t].canSkip)return t;return E.length-1}function v(e){var t=e.steps.current+1;if(d(t)){var a=b(t);return a=Math.max(e.steps.completed,a),Object(l.a)(Object(l.a)({},e),{},{steps:{current:t,completed:a}})}return e}function y(e,t){return{data:t,updateCount:e.updateCount+1}}var O=function(e,t){switch(e||(console.warn("No state was supplied to reducer. Falling back to default values"),e=w),t.type){case"SET_IMAGE":return function(e,t){var a=t.payload,n=Object(l.a)({},e.images);switch(a.imageName){case"AFTER_IMAGE":n.after=y(n.after,a.imageData);break;case"BEFORE_IMAGE":n.before=y(n.before,a.imageData),function(e){var t=document.createElement("img");t.onload=function(e){console.log("image dimendion: ".concat(t.naturalWidth,"x").concat(t.naturalHeight))},t.src=e}(a.imageData);break;default:return console.warn('Unknown image name: "'.concat(a.imageName,'"')),e}return v(Object(l.a)(Object(l.a)({},e),{},{images:n}))}(e,t);case"COMPLETE_STEP":return v(e);case"GO_TO_STEP":return function(e,t){var a=t.payload;return d(a)&&a<=e.steps.completed?Object(l.a)(Object(l.a)({},e),{},{steps:Object(l.a)(Object(l.a)({},e.steps),{},{current:a})}):(console.warn("Can not switch to step ".concat(a,". ReduxState: ").concat(e.steps)),e)}(e,t);case"SET_IMAGE_SOURCE":return function(e,t){var a=t.payload;return Object(l.a)(Object(l.a)({},e),{},{settings:Object(l.a)(Object(l.a)({},e.settings),{},{imageSource:a})})}(e,t);case"SET_SCREEN":var a=t.payload;return Object(l.a)(Object(l.a)({},e),{},{screen:a});case"SET_COMPARE_TYPE":var n=t.payload;return Object(l.a)(Object(l.a)({},e),{},{comparisonType:n});case"SET_SCREENSHOT_FORMAT":var r=t.payload;return Object(l.a)(Object(l.a)({},e),{},{settings:Object(l.a)(Object(l.a)({},e.settings),{},{screenshotFormat:r})});case"SET_PREFERRED_RES":var o=t.payload;return Object(l.a)(Object(l.a)({},e),{},{settings:Object(l.a)(Object(l.a)({},e.settings),{},{preferredResolution:o})});case"SET_ENABLE_BEFORE_OVERLAY":var s=t.payload;return Object(l.a)(Object(l.a)({},e),{},{settings:Object(l.a)(Object(l.a)({},e.settings),{},{overlayBeforeImage:s})});case"@@INIT":return e;default:return console.warn('Unknown action type: "'.concat(t.type,'"')),e}},S={data:null,updateCount:0},w={images:{before:S,after:S},steps:{current:0,completed:b(0)},settings:{imageSource:"SOURCE_WEBCAM",screenshotFormat:"png",preferredResolution:{width:1920,height:1080},overlayBeforeImage:!0},comparisonType:"COMPARE_AUTOMATIC",screen:"SCREEN_MENU"},I=void 0;if(window.__REDUX_DEVTOOLS_EXTENSION__){I=window.__REDUX_DEVTOOLS_EXTENSION__({trace:!1,traceLimit:25})}var C=Object(i.b)(O,w,I),_=C.dispatch;function k(e){N("BEFORE_IMAGE",e)}function R(e){N("AFTER_IMAGE",e)}function N(e,t){_({type:"SET_IMAGE",payload:{imageName:e,imageData:t}})}function j(e){_({type:"GO_TO_STEP",payload:e})}function T(e){_({type:"SET_IMAGE_SOURCE",payload:e})}function A(e){_({type:"SET_SCREENSHOT_FORMAT",payload:e})}function M(e){return r.a.createElement("button",{className:"button",onClick:function(t){return a=e.screen,void _({type:"SET_SCREEN",payload:a});var a}},e.label)}function D(){return r.a.createElement("div",{className:"screen-menu"},r.a.createElement(M,{label:"Start",screen:"SCREEN_STEPS"}),r.a.createElement(M,{label:"Settings",screen:"SCREEN_SETTINGS"}),r.a.createElement(M,{label:"How it works",screen:"SCREEN_HOW_IT_WORKS"}),r.a.createElement(M,{label:"Privacy policy",screen:"SCREEN_PRIVACY"}))}function B(){return r.a.createElement("div",{className:"screen-instructions"},r.a.createElement("h2",null,"How it works"),r.a.createElement("p",null,"This web application lets you detect if someone messed with your stuff. It does this by comparing pictures taken before and after you left it unsupervised. Then it highlights any differences it has found. (You could also use it to mess with peoples stuff and make sure that you leave it exactly like they left it. But don't do that: it's evil)"),r.a.createElement("h2",null,"Instructions"),r.a.createElement("ol",null,r.a.createElement("li",null,"(Optional) Select the settings you want to use"),r.a.createElement("li",null,"Take a image before you leave"),r.a.createElement("li",null,"Keep this website open (or download/save the image)"),r.a.createElement("li",null,"Take an image after you return. By default the image from before will be superimposed over the camera view to help you find the same angle / distance again"),r.a.createElement("li",null,"Compare the two images using the different comparison tools")),r.a.createElement(M,{label:"Back",screen:"SCREEN_MENU"}))}var P=a(4),F=a(5),U=a(7),x=a(6);function G(e){return void 0===e.show||e.show?r.a.createElement("div",{className:"setting"},r.a.createElement("span",{className:"label"},e.label,e.hint&&r.a.createElement("abbr",{title:e.hint.text}," (".concat(e.hint.trigger,")"))),e.children):null}var L=a(25),H=a(26);function V(e){var t=Object(H.a)(e.optionMap.entries());return r.a.createElement("select",{value:e.value,onChange:function(t){return e.onValueChange(t.target.value)}},t.map((function(e){var t=Object(L.a)(e,2),a=t[0],n=t[1];return r.a.createElement("option",{key:a,value:a},n)})))}var W=new Map;W.set("SOURCE_WEBCAM","Use webcam / camera"),W.set("SOURCE_FILE","Use local image files");var Y=new Map;Y.set("png","PNG"),Y.set("jpeg","JPEG"),Y.set("webp","WEBP");var z=new Map;z.set("640x480","480p"),z.set("1280x720","720p (HD)"),z.set("1920x1080","1080p (Full HD)"),z.set("3840x2160","2160p (4K UHD)");var K=function(e){Object(U.a)(a,e);var t=Object(x.a)(a);function a(){return Object(P.a)(this,a),t.apply(this,arguments)}return Object(F.a)(a,[{key:"render",value:function(){var e=this,t="SOURCE_WEBCAM"===this.props.imageSource;return r.a.createElement("div",{className:"settings"},r.a.createElement("h2",null,"Settings"),r.a.createElement(G,{label:"Image source"},r.a.createElement(V,{optionMap:W,value:this.props.imageSource,onValueChange:T})),r.a.createElement(G,{label:"Photo format",show:t},r.a.createElement(V,{optionMap:Y,value:this.props.screenshotFormat,onValueChange:A})),r.a.createElement(G,{label:"Resolution",hint:{trigger:"*",text:"The browser will request this resolution, but depending on your hardware the actual resolution may differ"},show:t},r.a.createElement(V,{optionMap:z,value:this.props.preferredResolution,onValueChange:this.onResolutionChange})),r.a.createElement(G,{label:"Image overlay",hint:{trigger:"?",text:"Enabling this option will overlay the image you took before on the camera view, so that you can find the alignment and position that you used before"},show:t},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:this.props.isBeforeOverlayEnabled,onChange:function(t){return a=!e.props.isBeforeOverlayEnabled,void _({type:"SET_ENABLE_BEFORE_OVERLAY",payload:a});var a}}),"help you find the same perspective again")),r.a.createElement(M,{label:"Back",screen:"SCREEN_MENU"}))}},{key:"onResolutionChange",value:function(e){try{var t=e.split("x",2),a=Number(t[0]),n=Number(t[1]);_({type:"SET_PREFERRED_RES",payload:{width:a,height:n}})}catch(r){console.error('Can not parse resolution: "'.concat(e,'"'),r)}}}]),a}(r.a.Component),X=Object(c.b)((function(e,t){var a=e.settings.preferredResolution;return Object(l.a)(Object(l.a)({},t),{},{imageSource:e.settings.imageSource,screenshotFormat:e.settings.screenshotFormat,preferredResolution:"".concat(a.width,"x").concat(a.height),isBeforeOverlayEnabled:e.settings.overlayBeforeImage})}))(K);function J(){return r.a.createElement("div",{className:"screen-privacy"},r.a.createElement("h1",null,"Privacy policy"),r.a.createElement("h2",null,"Data collection"),r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"I do not collect any information about you. "),'This app is designed to work locally and to never send any data to any servers. That means that any photos that you take or "upload" will never leave your browser. I also do not use local data storage (like cookies), which means that all data will be lost when you leave or reload the website.'),r.a.createElement("h2",null,"Third party libraries"),r.a.createElement("p",null,"To realize this website (without spending years developing it) I use some third party libraries. They handle tasks like accessing the camera / webcam and managing the state of the application. As far as I can tell none of them send any data back home."),r.a.createElement("h2",null,"Hosting provider"),r.a.createElement("p",null,"GitHub Pages is used to host this web application. Their ",r.a.createElement("a",{href:"https://docs.github.com/en/github/site-policy/github-privacy-statement#github-pages"},"privacy policy")," states (last checked 2020-07-10):",r.a.createElement("br",null),r.a.createElement("code",null,"Please note that GitHub may collect User Personal Information from visitors to your GitHub Pages website, including logs of visitor IP addresses, to comply with legal obligations, and to maintain the security and integrity of the Website and the Service.")),r.a.createElement("h2",null,"Contact"),r.a.createElement("span",null,"If you notice any errors in this document or any activity that is not in line with this policy please send an email with your findings to me (",r.a.createElement("a",{href:"mailto:info@six-two.dev"},"info@six-two.dev"),")!"),r.a.createElement("br",null),r.a.createElement(M,{label:"Back",screen:"SCREEN_MENU"}))}var q=function(e){Object(U.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(P.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).renderStep=function(t){var a,n=["step"];return t.number<=e.props.lastSelectableStep?t.number===e.props.currentStep?n.push("selected"):(n.push("selectable"),a=function(){return j(t.number)}):n.push("disabled"),r.a.createElement("li",{className:n.join(" "),key:t.number,onClick:a},t.name)},e}return Object(F.a)(a,[{key:"render",value:function(){var e=this.props.currentStep;return r.a.createElement("div",{className:"step-header"},r.a.createElement("ul",{className:"list"},E.map(this.renderStep)),r.a.createElement("div",{className:"buttons"},this.goToStepButton("Previous",e-1),this.goToStepButton("Next",e+1)))}},{key:"goToStepButton",value:function(e,t){var a=Boolean(0<=t&&t<=this.props.lastSelectableStep)?void 0:"disabled";return r.a.createElement("button",{className:a,onClick:function(e){return j(t)}},e)}}]),a}(r.a.Component),Z=Object(c.b)((function(e,t){return Object(l.a)(Object(l.a)({},t),{},{lastSelectableStep:e.steps.completed,currentStep:e.steps.current})}))(q),Q=a(19);function $(e){if(!e.imageData)return null;var t=e.fileName;return void 0!==e.autoDetectFormat&&!0!==e.autoDetectFormat||(t+="."+function(e){try{var t=e.match(/^data:image\/([a-zA-Z]+)/);if(t){var a=t[0].split("/")[1];return console.debug("Auto detect image format:",a),a}}catch(n){console.error("Internal error in detectImageFormat",n)}return console.warn('Auto detect format failed. Data url looks like "'.concat(e.slice(0,100),'" (cut off after 100 characters)')),"unknown.png"}(e.imageData)),r.a.createElement("a",{className:"download-button",href:e.imageData,download:t},e.buttonText)}var ee=function(e){Object(U.a)(a,e);var t=Object(x.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).resembleCallback=function(e,t){if(e)console.error("An error occured while comparing the images: ",e),n.setState({errorMessage:"An error occured while comparing the images: ".concat(e)});else{var a=t.getImageDataUrl();n.setState({diffImage:a})}},n.state={diffImage:null,errorMessage:null},n}return Object(F.a)(a,[{key:"render",value:function(){return this.state.errorMessage?r.a.createElement("div",null,this.state.errorMessage):this.state.diffImage?r.a.createElement("div",{className:"diff-view"},r.a.createElement("img",{src:this.state.diffImage,alt:"Differences between the before and after pictures"}),r.a.createElement($,{buttonText:"Download comparison image",fileName:"before-after-compare",imageData:this.state.diffImage})):(this.calculateDiffImage(),r.a.createElement("div",null,"Comparing images..."))}},{key:"calculateDiffImage",value:function(){var e=this.props.afterImage,t=this.props.beforeImage;if(e&&t){Object(Q.compare)(t,e,{output:{errorType:"movementDifferenceIntensity",largeImageThreshold:1500,useCrossOrigin:!1,outputDiff:!0},scaleToSameSize:!0,ignore:"colors"},this.resembleCallback)}else this.setState({errorMessage:"Before or after image is empty or undefined"})}}]),a}(r.a.Component),te=a(20),ae=a.n(te);function ne(e){return r.a.createElement("div",{className:"image-diff left-right-slider"},r.a.createElement("div",{className:"text"},"Move the slider around to compare the images."),r.a.createElement(ae.a,{leftImage:e.beforeImage,leftImageLabel:"Before",rightImage:e.afterImage,rightImageLabel:"After",sliderLineColor:"red",handle:r.a.createElement(r.a.Fragment,null)}))}var re=a(24),oe=(a(45),re.a),se=function(e){Object(U.a)(a,e);var t=Object(x.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).onOpacityChange=function(e){e!==n.state.sliderValue&&n.setState({sliderValue:e})},n.state={sliderValue:50},n}return Object(F.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"img-diff crossfade"},r.a.createElement("div",{className:"slider-div"},r.a.createElement("span",null,"Before"),r.a.createElement(oe,{min:0,max:100,value:this.state.sliderValue,onChange:this.onOpacityChange}),r.a.createElement("span",null,"After")),r.a.createElement("div",{className:"overlay-container"},r.a.createElement("img",{src:this.props.beforeImage,alt:""}),r.a.createElement("img",{className:"on-top",src:this.props.afterImage,alt:"",style:{opacity:this.state.sliderValue/100}})))}}]),a}(r.a.Component);function ce(e){return!1!==e.log&&console.warn("[BugMessage]",e.message),r.a.createElement("div",{className:"err-msg"},r.a.createElement("div",{className:"bold"},"Ooops, this should not happen. You have probably found a bug!"),e.message)}var le=new Map;le.set("COMPARE_AUTOMATIC","Automatic"),le.set("COMPARE_SLIDER_RIGHT_LEFT","Slider: Right - Left"),le.set("COMPARE_CROSSFADE","Crossfade");var ie=function(e){Object(U.a)(a,e);var t=Object(x.a)(a);function a(){return Object(P.a)(this,a),t.apply(this,arguments)}return Object(F.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"diff-view"},r.a.createElement("h2",null,"Comparison"),r.a.createElement("span",null,"Type:"),r.a.createElement(V,{optionMap:le,value:this.props.type,onValueChange:function(e){_({type:"SET_COMPARE_TYPE",payload:e})}}),this.renderContents())}},{key:"renderContents",value:function(){var e=this.props.beforeImage;if(!e)return r.a.createElement(ce,{message:"Before image is missing"});var t=this.props.afterImage;if(!t)return r.a.createElement(ce,{message:"After image is missing"});switch(this.props.type){case"COMPARE_AUTOMATIC":return r.a.createElement(ee,{beforeImage:e,afterImage:t});case"COMPARE_CROSSFADE":return r.a.createElement(se,{beforeImage:e,afterImage:t});case"COMPARE_SLIDER_RIGHT_LEFT":return r.a.createElement(ne,{beforeImage:e,afterImage:t});default:return r.a.createElement(ce,{message:"Unknown compare type: ".concat(this.props.type)})}}}]),a}(r.a.Component),ue=Object(c.b)((function(e,t){return Object(l.a)(Object(l.a)({},t),{},{beforeImage:e.images.before.data,afterImage:e.images.after.data,type:e.comparisonType})}))(ie),me=a(23),pe=a.n(me),ge=function(e){Object(U.a)(a,e);var t=Object(x.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).webcamRef=void 0,n.onClick=function(e){var t=n.webcamRef.current.getScreenshot();t&&n.props.onPhoto(t)},n.webcamRef=r.a.createRef(),n}return Object(F.a)(a,[{key:"render",value:function(){var e=this.props.backgroundImage,t="take-image-div"+(e?" transparent-cam":""),a=C.getState().settings.screenshotFormat,n=C.getState().settings.preferredResolution,o={facingMode:{ideal:"environment"},width:{ideal:n.width},height:{ideal:n.height}};return r.a.createElement("div",{className:t},r.a.createElement(pe.a,{ref:this.webcamRef,className:"cam",onClick:this.onClick,audio:!1,videoConstraints:o,forceScreenshotSourceSize:!0,screenshotFormat:"image/".concat(a)}),e?r.a.createElement("img",{src:e,alt:"",onClick:this.onClick}):null)}}]),a}(r.a.Component);var fe=function(e){return r.a.createElement("input",{className:"image-upload",type:"file",onChange:function(t){var a=t.target.files;if(a&&a[0]){var n=new FileReader;n.onload=function(t){e.setImage(t.target.result)},n.readAsDataURL(a[0])}t.target.value=null}})};var he=function(e){var t=C.getState().settings.imageSource;switch(t){case"SOURCE_WEBCAM":return function(e){return r.a.createElement("div",{className:"get-image"},r.a.createElement("h2",null,"Take a photo"),"Allow camera access and touch/click the image below.",r.a.createElement(ge,{onPhoto:e.onImage,backgroundImage:e.backgroundImage}),r.a.createElement($,{buttonText:"Download last image taken",fileName:"webcam-image",imageData:e.currentImage}))}(e);case"SOURCE_FILE":return function(e){return r.a.createElement("div",{className:"get-image"},r.a.createElement("h2",null,"Select an image"),r.a.createElement(fe,{setImage:e.onImage}))}(e);default:return r.a.createElement(ce,{message:'Unknown image source: "'.concat(t,'"')})}};function Ee(e){return e.beforeImage?r.a.createElement("div",{className:"step-between"},r.a.createElement("h2",null,"Do your thing"),"Below is the image you have taken. If it is looking ok, you can go and do your stuff.",r.a.createElement("span",{className:"important-hint"}," DO NOT close or reload this tab, or the image will be lost! "),"When you return go to the next step.",r.a.createElement("br",null),"If you want to make sure you don't loose it click the ",r.a.createElement("code",null,"Download image")," button below. If you do not like the image, go back to the previous step and take another image.",r.a.createElement("img",{src:e.beforeImage,alt:""}),r.a.createElement($,{buttonText:"Download image",fileName:"webcam-image",imageData:e.beforeImage})):r.a.createElement("div",null,"Before image not found: please go back to the previous step")}var de=function(e){Object(U.a)(a,e);var t=Object(x.a)(a);function a(){return Object(P.a)(this,a),t.apply(this,arguments)}return Object(F.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"step-content"},this.renderContents(),this.renderNextButtonIfPossible())}},{key:"renderContents",value:function(){switch(this.props.step){case p:return r.a.createElement(he,{onImage:k,currentImage:this.props.beforeImageData});case g:return r.a.createElement(Ee,{beforeImage:this.props.beforeImageData});case f:var e=this.props.overlayBeforeImage&&this.props.beforeImageData||void 0;return r.a.createElement(he,{onImage:R,currentImage:this.props.afterImageData,backgroundImage:e});case h:return r.a.createElement(ue,null);default:return r.a.createElement(ce,{message:'Unknown step: "'.concat(this.props.step,'"')})}}},{key:"renderNextButtonIfPossible",value:function(){if(E[this.props.step].canSkip){var e=this.props.step+1;if(e<E.length){return r.a.createElement("button",{className:"next-button",onClick:function(t){return j(e)}},"Next step")}}return null}}]),a}(r.a.Component),be=Object(c.b)((function(e,t){return Object(l.a)(Object(l.a)({},t),{},{beforeImageData:e.images.before.data,afterImageData:e.images.after.data,overlayBeforeImage:e.settings.overlayBeforeImage,step:e.steps.current})}))(de);a(46);function ve(e){switch(e.screen){case"SCREEN_MENU":return r.a.createElement(D,null);case"SCREEN_STEPS":return r.a.createElement("div",null,r.a.createElement(Z,null),r.a.createElement(be,null));case"SCREEN_SETTINGS":return r.a.createElement(X,null);case"SCREEN_HOW_IT_WORKS":return r.a.createElement(B,null);case"SCREEN_PRIVACY":return r.a.createElement(J,null);default:return r.a.createElement(ce,{message:'Unknown screen: "'.concat(e.screen,'"')})}}var ye=Object(c.b)((function(e,t){return Object(l.a)(Object(l.a)({},t),{},{screen:e.screen})}))((function(e){return r.a.createElement("div",{className:"app"},r.a.createElement(ve,{screen:e.screen}))}));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,{store:C},r.a.createElement(ye,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.4c4e2b8e.chunk.js.map