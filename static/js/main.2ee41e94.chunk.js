(this.webpackJsonpreact_did_someone_touch_this=this.webpackJsonpreact_did_someone_touch_this||[]).push([[0],{27:function(e,t,a){e.exports=a(47)},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),c=a.n(o),i=a(8),s=a(2),l=a(3),u=a(5),m=a(4),p=a(1),f=a(13),g=[];function h(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=g.length,n={number:a,name:e,canSkip:t};return g.push(n),a}var d=h("Intro",!0),b=h("Settings",!0),E=h("Before photo"),v=h("After photo"),O=h("Compare photos"),y=g;function j(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e>=0&&e<y.length;if(t&&!a)throw new Error("Step is not in bounds: ".concat(e));return a}function I(e){j(e,!0);for(var t=e;t<y.length;t++)if(!y[t].canSkip)return t;return y.length-1}function C(e,t){return{data:t,updateCount:e.updateCount+1}}var k=function(e,t){switch(e||(console.warn("No state was supplied to reducer. Falling back to default values"),e=w),t.type){case"SET_IMAGE":return function(e,t){var a=t.payload,n=Object(p.a)({},e.images);switch(a.imageName){case"AFTER_IMAGE":n.after=C(n.after,a.imageData);break;case"BEFORE_IMAGE":n.before=C(n.before,a.imageData),function(e){var t=document.createElement("img");t.onload=function(e){console.log("image dimendion: ".concat(t.naturalWidth,"x").concat(t.naturalHeight))},t.src=e}(a.imageData);break;default:return console.warn('Unknown image name: "'.concat(a.imageName,'"')),e}return Object(p.a)(Object(p.a)({},e),{},{images:n})}(e,t);case"COMPLETE_STEP":return function(e){var t=e.steps.current+1;if(j(t)){var a=I(t);return a=Math.max(e.steps.completed,a),Object(p.a)(Object(p.a)({},e),{},{steps:{current:t,completed:a}})}return e}(e);case"GO_TO_STEP":return function(e,t){var a=t.payload;return j(a)&&a<=e.steps.completed?Object(p.a)(Object(p.a)({},e),{},{steps:Object(p.a)(Object(p.a)({},e.steps),{},{current:a})}):(console.warn("Can not switch to step ".concat(a,". State: ").concat(e.steps)),e)}(e,t);case"SET_IMAGE_SOURCE":return function(e,t){var a=t.payload;return Object(p.a)(Object(p.a)({},e),{},{settings:Object(p.a)(Object(p.a)({},e.settings),{},{imageSource:a})})}(e,t);case"SET_COMPARE_TYPE":return Object(p.a)(Object(p.a)({},e),{},{comparisonType:t.payload});case"@@INIT":return e;default:return console.warn('Unknown action type: "'.concat(t.type,'"')),e}},S={data:null,updateCount:0},w={images:{before:S,after:S},steps:{current:0,completed:I(0)},settings:{imageSource:"Use webcam",screenshotFormat:"png",preferredResolution:{width:1920,height:1080}},comparisonType:"COMPARE_AUTOMATIC"},T=void 0;if(window.__REDUX_DEVTOOLS_EXTENSION__){T=window.__REDUX_DEVTOOLS_EXTENSION__({trace:!1,traceLimit:25})}var _=Object(f.b)(k,w,T),A=_.dispatch;function N(e,t){return{type:"SET_IMAGE",payload:{imageName:e,imageData:t}}}var M=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).renderStep=function(t){var a,n=["step"];return t.number<=e.props.lastSelectableStep?t.number===e.props.currentStep?n.push("selected"):(n.push("selectable"),a=function(){return e.props.goToStep(t.number)}):n.push("disabled"),r.a.createElement("li",{className:n.join(" "),key:t.number,onClick:a},t.name)},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("ul",{className:"step-list"},y.map(this.renderStep))}}]),a}(r.a.Component),R=Object(i.b)((function(e,t){return Object(p.a)(Object(p.a)({},t),{},{lastSelectableStep:e.steps.completed,currentStep:e.steps.current})}),(function(e){return{goToStep:function(t){return e({type:"GO_TO_STEP",payload:t})}}}))(M),D=a(19);function U(e){return r.a.createElement("a",{className:"download-button",href:e.imageData,download:e.fileName},e.buttonText)}var B=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).resembleCallback=function(e,t){if(e)console.error("An error occured while comparing the images: ",e),n.setState({errorMessage:"An error occured while comparing the images: ".concat(e)});else{var a=t.getImageDataUrl();n.setState({diffImage:a})}},n.state={diffImage:null,errorMessage:null},n}return Object(l.a)(a,[{key:"render",value:function(){return this.state.errorMessage?r.a.createElement("div",null,this.state.errorMessage):this.state.diffImage?r.a.createElement("div",{className:"diff-view"},r.a.createElement("img",{src:this.state.diffImage,alt:"Differences between the before and after pictures"}),r.a.createElement(U,{buttonText:"Download comparison image",fileName:"before-after-compare.png",imageData:this.state.diffImage})):(this.calculateDiffImage(),r.a.createElement("div",null,"Comparing images..."))}},{key:"calculateDiffImage",value:function(){var e=this.props.afterImage,t=this.props.beforeImage;if(e&&t){Object(D.compare)(t,e,{output:{errorType:"movementDifferenceIntensity",largeImageThreshold:1500,useCrossOrigin:!1,outputDiff:!0},scaleToSameSize:!0,ignore:"colors"},this.resembleCallback)}else this.setState({errorMessage:"Before or after image is empty or undefined"})}}]),a}(r.a.Component),P=a(20),F=a.n(P);function x(e){return r.a.createElement("div",{className:"image-diff left-right-slider"},r.a.createElement("div",{className:"text"},"Move the slider around to compare the images."),r.a.createElement(F.a,{leftImage:e.beforeImage,leftImageLabel:"Before",rightImage:e.afterImage,rightImageLabel:"After",sliderLineColor:"red",handle:r.a.createElement(r.a.Fragment,null)}))}var L=a(24),G=(a(45),L.a),V=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onOpacityChange=function(e){e!==n.state.sliderValue&&n.setState({sliderValue:e})},n.state={sliderValue:50},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"img-diff crossfade"},r.a.createElement("div",{className:"slider-div"},r.a.createElement("span",null,"Before"),r.a.createElement(G,{min:0,max:100,value:this.state.sliderValue,onChange:this.onOpacityChange}),r.a.createElement("span",null,"After")),r.a.createElement("div",{className:"overlay-container"},r.a.createElement("img",{src:this.props.beforeImage,alt:""}),r.a.createElement("img",{className:"on-top",src:this.props.afterImage,alt:"",style:{opacity:this.state.sliderValue/100}})))}}]),a}(r.a.Component),W=a(26),H=a(25),X=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onChange=function(t){e.props.onValueChange(t.target.value)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=Object(H.a)(this.props.optionMap.entries());return r.a.createElement("select",{value:this.props.value,onChange:this.onChange},e.map((function(e){var t=Object(W.a)(e,2),a=t[0],n=t[1];return r.a.createElement("option",{key:a,value:a},n)})))}}]),a}(r.a.Component),Y=new Map;Y.set("COMPARE_AUTOMATIC","Automatic"),Y.set("COMPARE_SLIDER_RIGHT_LEFT","Slider: Right - Left"),Y.set("COMPARE_CROSSFADE","Crossfade");var z=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"diff-view"},r.a.createElement("h2",null,"Comparison"),"Type: ",r.a.createElement(X,{optionMap:Y,value:this.props.type,onValueChange:function(e){A({type:"SET_COMPARE_TYPE",payload:e})}}),this.renderContents())}},{key:"renderContents",value:function(){var e=this.props.beforeImage,t=this.props.afterImage;if(!e||!t)return r.a.createElement("div",null,"Error: Before or after image is missing. This is probably a bug!");switch(this.props.type){case"COMPARE_AUTOMATIC":return r.a.createElement(B,{beforeImage:e,afterImage:t});case"COMPARE_CROSSFADE":return r.a.createElement(V,{beforeImage:e,afterImage:t});case"COMPARE_SLIDER_RIGHT_LEFT":return r.a.createElement(x,{beforeImage:e,afterImage:t});default:return r.a.createElement("div",null,"Unknown type: ",this.props.type)}}}]),a}(r.a.Component),J=Object(i.b)((function(e,t){return Object(p.a)(Object(p.a)({},t),{},{beforeImage:e.images.before.data,afterImage:e.images.after.data,type:e.comparisonType})}))(z),K=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"instructions"},r.a.createElement("h2",null,"How it works"),r.a.createElement("p",null,"This web application lets you detect if someone messed with your stuff. It does this by comparing pictures taken before and after you left it unsupervised. Then it highlights any differences it has found. (You could also use it to mess with peoples stuff and make sure that you leave it exactly like they left it. But don't do that: it's evil)"),r.a.createElement("h2",null,"Instructions"),r.a.createElement("ol",null,r.a.createElement("li",null,"Read these instructions"),r.a.createElement("li",null,"Select the settings you want to use"),r.a.createElement("li",null,"Take a image before you leave"),r.a.createElement("li",null,"Keep this website open (or download/save the image)"),r.a.createElement("li",null,"Take an image after you return. By default the image from before will be superimposed over the camera view to help you find the same angle / distance again"),r.a.createElement("li",null,"Check areas with detected changes (marked in pink)")))}}]),a}(r.a.Component),q=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onChange=function(t){e.props.onChange(t.target.value)},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("select",{onChange:this.onChange,value:this.props.value},r.a.createElement("option",{value:"",key:-1,disabled:!0,hidden:!0},this.props.prompt?this.props.prompt:"Choose a option"),this.props.options.map((function(e,t){return r.a.createElement("option",{value:e,key:t},e)})))}}],[{key:"defaultValue",value:function(){return""}}]),a}(r.a.Component),Q=["Use webcam","Upload image"],Z=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"settings"},r.a.createElement("h2",null,"Settings"),r.a.createElement("span",{className:"label"},"Image source:"),r.a.createElement(q,{options:Q,value:this.props.imageSource,onChange:this.props.setImageSource}))}}]),a}(r.a.Component),$=Object(i.b)((function(e,t){return Object(p.a)(Object(p.a)({},t),{},{imageSource:e.settings.imageSource})}),(function(e){return{setImageSource:function(t){return e(function(e){return{type:"SET_IMAGE_SOURCE",payload:e}}(t))}}}))(Z),ee=a(23),te=a.n(ee),ae=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).webcamRef=void 0,n.onClick=function(e){var t=n.webcamRef.current.getScreenshot();n.props.onPhoto(t)},n.webcamRef=r.a.createRef(),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.backgroundImage,t="take-image-div"+(e?" transparent-cam":""),a=_.getState().settings.screenshotFormat,n=_.getState().settings.preferredResolution,o={facingMode:{ideal:"environment"},width:{ideal:n.width},height:{ideal:n.height}};return r.a.createElement("div",{className:t},r.a.createElement(te.a,{ref:this.webcamRef,className:"cam",onClick:this.onClick,audio:!1,videoConstraints:o,forceScreenshotSourceSize:!0,screenshotFormat:"image/".concat(a)}),e?r.a.createElement("img",{src:e,alt:"",onClick:this.onClick}):null)}}]),a}(r.a.Component),ne=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onChange=function(e){var t=e.target.files;if(t&&t[0]){var a=new FileReader;a.onload=n.onFileUploaded,a.readAsDataURL(t[0])}e.target.value=null},n.onFileUploaded=function(e){n.props.setImage(e.target.result)},n.state={},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("input",{className:"image-upload",type:"file",onChange:this.onChange})}}]),a}(r.a.Component),re=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"get-image"},this.renderContents())}},{key:"renderContents",value:function(){switch(this.props.imageSource){case"Use webcam":return r.a.createElement("div",null,r.a.createElement("h2",null,"Take a photo"),"Allow camera access and touch/click the image below.",r.a.createElement(ae,{onPhoto:this.props.onImage,backgroundImage:this.props.backgroundImage}),this.renderDownloadButton());case"Upload image":return r.a.createElement("div",null,r.a.createElement("h2",null,"Upload an image"),r.a.createElement(ne,{setImage:this.props.onImage}));default:throw new Error('Unknown image source: "'.concat(this.props.imageSource,'"'))}}},{key:"renderDownloadButton",value:function(){if(this.props.currentImage){var e=_.getState().settings.screenshotFormat;return r.a.createElement(U,{buttonText:"Download last image taken",fileName:"webcam-image.".concat(e),imageData:this.props.currentImage})}}}]),a}(r.a.Component),oe=Object(i.b)((function(e,t){return Object(p.a)(Object(p.a)({},t),{},{imageSource:e.settings.imageSource})}),(function(e){return{}}))(re),ce=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).takeBeforeImage=function(t){e.props.setBeforeImage(t),e.props.completeStep()},e.takeAfterImage=function(t){e.props.setAfterImage(t),e.props.completeStep()},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"step-content"},this.renderContents())}},{key:"renderContents",value:function(){switch(this.props.step){case d:return this.renderWithNextButton(r.a.createElement(K,null));case b:return this.renderWithNextButton(r.a.createElement($,null));case E:return r.a.createElement(oe,{onImage:this.takeBeforeImage,currentImage:this.props.beforeImageData});case v:return r.a.createElement(oe,{onImage:this.takeAfterImage,currentImage:this.props.afterImageData,backgroundImage:this.props.beforeImageData});case O:return r.a.createElement(J,null);default:return r.a.createElement("span",null,"Error: Unknown step")}}},{key:"renderWithNextButton",value:function(e){return r.a.createElement("div",null,e,r.a.createElement("button",{className:"next-button",onClick:this.props.completeStep},"Next step"))}}]),a}(r.a.Component),ie=Object(i.b)((function(e,t){return Object(p.a)(Object(p.a)({},t),{},{beforeImageData:e.images.before.data,afterImageData:e.images.after.data,step:e.steps.current})}),(function(e){return{setBeforeImage:function(t){return e(function(e){return N("BEFORE_IMAGE",e)}(t))},setAfterImage:function(t){return e(function(e){return N("AFTER_IMAGE",e)}(t))},completeStep:function(){return e({type:"COMPLETE_STEP"})}}}))(ce),se=(a(46),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"err-msg"},"This website is still in pre alpha state. It is likely instable, buggy, ugly and might get broken from time to time."),r.a.createElement("div",{className:"app-contents"},r.a.createElement(R,null),r.a.createElement(ie,null)))}}]),a}(r.a.Component));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:_},r.a.createElement(se,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.2ee41e94.chunk.js.map