{"version":3,"sources":["app/steps/Steps.ts","app/redux/reducer.ts","app/redux/constants.ts","app/redux/store.ts","app/redux/actions.ts","app/StepDisplay.tsx","app/DownloadImageButton.tsx","app/compare-images/AutomaticCompare.tsx","app/compare-images/LeftRightSlider.tsx","app/compare-images/CrossfadeCompare.tsx","app/Dropdown.tsx","app/ImageCompareView.tsx","app/steps/Instructions.tsx","app/OptionView.tsx","app/SettingsView.tsx","app/TakeImageView.tsx","app/ImageUpload.tsx","app/GetImage.tsx","app/StepContentDisplay.tsx","app/Main.tsx","index.tsx","serviceWorker.ts"],"names":["steps","addStep","name","canSkip","number","length","data","push","STEP_INTRO","STEP_SETTINGS","STEP_BEFORE_PHOTO","STEP_AFTER_PHOTO","STEP_COMPARE","STEPS","assertStepInBounds","step","throwError","isInBounds","Error","getLastAccessibleStepIndex","completedSteps","i","modifyImageState","oldSubState","newData","updateCount","reducer","state","action","console","warn","fallbackState","type","payload","imageStateCopy","images","imageName","after","imageData","before","src","img","document","createElement","onload","event","log","naturalWidth","naturalHeight","debug_print_image_size","handle_setImage","next","current","completed","Math","max","handle_completeStep","handle_goToStep","value","settings","imageSource","handle_setImageSource","comparisonType","DEFAULT_IMAGE_STATE","screenshotFormat","preferredResolution","width","height","devTools","undefined","window","__REDUX_DEVTOOLS_EXTENSION__","trace","traceLimit","store","createStore","d","dispatch","setImage","StepDisplay","renderStep","onClick","classes","props","lastSelectableStep","currentStep","goToStep","className","join","key","map","this","React","Component","connect","ownProps","index","DownloadImageButton","href","download","fileName","buttonText","AutomaticCompare","resembleCallback","error","setState","errorMessage","getImageDataUrl","diffImage","alt","calculateDiffImage","afterImage","beforeImage","compare","output","errorType","largeImageThreshold","useCrossOrigin","outputDiff","scaleToSameSize","ignore","LeftRightSlider","leftImage","leftImageLabel","rightImage","rightImageLabel","sliderLineColor","handle","Fragment","MySlider","Slider","CrossfadeCompare","onOpacityChange","sliderValue","min","onChange","style","opacity","DropdownChooser","e","onValueChange","target","options","optionMap","entries","TYPES","Map","set","ImageCompareView","x","renderContents","InstructionsView","ChooseOptionView","disabled","hidden","prompt","SOURCES","SettingsView","OptionView","setImageSource","TakeImageView","webcamRef","photo","getScreenshot","onPhoto","createRef","bgImg","backgroundImage","getState","resolution","VIDEO_CONSTRAINTS","facingMode","ideal","ref","audio","videoConstraints","forceScreenshotSourceSize","ImageUrlUploader","files","fileReader","FileReader","onFileUploaded","readAsDataURL","result","GetImageView","onImage","renderDownloadButton","ImageUpload","currentImage","StepContentView","takeBeforeImage","image","setBeforeImage","completeStep","takeAfterImage","setAfterImage","Steps","renderWithNextButton","GetImage","beforeImageData","afterImageData","component","MainView","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.2ee41e94.chunk.js","sourcesContent":["\nexport interface StepData {\n  number: number,\n  name: string,\n  canSkip: boolean,\n}\n\nlet steps: StepData[] = [];\n\nfunction addStep(name: string, canSkip: boolean = false): number {\n  let number = steps.length;\n  let data: StepData = { number: number, name: name, canSkip: canSkip };\n  steps.push(data);\n  return number;\n}\n\nexport const STEP_INTRO = addStep(\"Intro\", true);\nexport const STEP_SETTINGS = addStep(\"Settings\", true);\nexport const STEP_BEFORE_PHOTO = addStep(\"Before photo\");\nexport const STEP_AFTER_PHOTO = addStep(\"After photo\");\nexport const STEP_COMPARE = addStep(\"Compare photos\");\n\nexport const STEPS = steps;\n// console.debug(steps);\n\nexport function assertStepInBounds(step: number, throwError: boolean = false): boolean {\n  let isInBounds = step >= 0 && step < STEPS.length;\n  if (throwError && !isInBounds) {\n    throw new Error(`Step is not in bounds: ${step}`);\n  }\n  return isInBounds;\n}\n\nexport function getLastAccessibleStepIndex(completedSteps: number) {\n  assertStepInBounds(completedSteps, true);//throw error if not in bounds\n\n  for (let i = completedSteps; i < STEPS.length; i++) {\n    if (!STEPS[i].canSkip) {\n      // Return the first following non-skippable step\n      return i;\n    }\n  }\n  return STEPS.length - 1;\n}\n\nexport function canAccessStep(step: number, completedSteps: number): boolean {\n  assertStepInBounds(step, true);\n  assertStepInBounds(completedSteps, true);\n\n  if (step <= completedSteps) {\n    // save time calculating stuff\n    return true;\n  } else {\n    return step <= getLastAccessibleStepIndex(completedSteps);\n  }\n}\n","import * as Actions from './actions';\nimport * as C from './constants';\nimport { State, ImageState, ImageData, fallbackState } from './store';\nimport { getLastAccessibleStepIndex, assertStepInBounds } from '../steps/Steps';\n\n\nfunction reducer(state: State | undefined, action: Actions.Action): State {\n  if (!state) {\n    console.warn(\"No state was supplied to reducer. Falling back to default values\");\n    state = fallbackState;\n  }\n\n  // state = {\n  //   ...state,\n  //   updateCounter: state.updateCounter + 1,\n  // };\n\n  switch (action.type) {\n    case C.SET_IMAGE: {\n      return handle_setImage(state, action);\n    }\n    case C.COMPLETE_STEP: {\n      return handle_completeStep(state);\n    }\n    case C.GO_TO_STEP: {\n      return handle_goToStep(state, action);\n    }\n    case C.SET_IMAGE_SOURCE: {\n      return handle_setImageSource(state, action);\n    }\n    case C.SET_COMPARE_TYPE: {\n      return {\n        ...state,\n        comparisonType: (action as any).payload,\n      }\n    }\n    case \"@@INIT\":\n      return state;\n    default:\n      console.warn(`Unknown action type: \"${action.type}\"`);\n      return state;\n  }\n}\n\nfunction handle_completeStep(state: State): State {\n  let next = state.steps.current + 1;\n  if (assertStepInBounds(next)) {\n    let completed = getLastAccessibleStepIndex(next);\n    // handle cases where the user went back\n    completed = Math.max(state.steps.completed, completed);\n    return {\n      ...state,\n      steps: {\n        current: next,\n        completed: completed,\n      },\n    }\n  } else {\n    return state;\n  }\n}\n\nfunction handle_setImageSource(state: State, action: Actions.Action): State {\n  let value = (action as Actions.StringPayloadAction).payload;\n  return {\n    ...state,\n    settings: {\n      ...state.settings,\n      imageSource: value,\n    },\n  };\n}\n\nfunction handle_goToStep(state: State, action: Actions.Action): State {\n  let step = (action as Actions.GoToStepAction).payload;\n  if (assertStepInBounds(step) && step <= state.steps.completed) {\n    return {\n      ...state,\n      steps: {\n        ...state.steps,\n        current: step,\n      },\n    };\n  } else {\n    console.warn(`Can not switch to step ${step}. State: ${state.steps}`);\n    return state;\n  }\n}\n\nfunction handle_setImage(state: State, action: Actions.Action): State {\n  let payload = (action as Actions.SetImageAction).payload;\n  let imageStateCopy = { ...state.images };\n  switch (payload.imageName) {\n    case C.AFTER_IMAGE:\n      imageStateCopy.after = modifyImageState(imageStateCopy.after, payload.imageData);\n      break;\n    case C.BEFORE_IMAGE:\n      imageStateCopy.before = modifyImageState(imageStateCopy.before, payload.imageData);\n      debug_print_image_size(payload.imageData);\n      break;\n    default:\n      console.warn(`Unknown image name: \"${payload.imageName}\"`);\n      return state;\n  }\n  return {\n    ...state,\n    images: imageStateCopy,\n  }\n}\n\nfunction debug_print_image_size(src: string) {\n  var img = document.createElement(\"img\");\n  img.onload = function(event) {\n    console.log(`image dimendion: ${img.naturalWidth}x${img.naturalHeight}`);\n  }\n  img.src = src;\n}\n\nfunction modifyImageState(oldSubState: ImageState, newData: ImageData) {\n  return {\n    data: newData,\n    updateCount: oldSubState.updateCount + 1,\n  };\n}\n\nexport default reducer\n","// Image sources\nexport const SOURCE_WEBCAM = \"Use webcam\";\nexport const SOURCE_FILE = \"Upload image\";\n\n// Image IDs\nexport const AFTER_IMAGE = \"AFTER_IMAGE\";\nexport const BEFORE_IMAGE = \"BEFORE_IMAGE\";\n\n// action types\nexport const SET_IMAGE = \"SET_IMAGE\";\nexport const COMPLETE_STEP = \"COMPLETE_STEP\";\nexport const GO_TO_STEP = \"GO_TO_STEP\"\nexport const SET_IMAGE_SOURCE = \"SET_IMAGE_SOURCE\";\nexport const SET_COMPARE_TYPE = \"SET_COMPARE_TYPE\";\n\n// compare types\nexport const COMPARE_AUTOMATIC = \"COMPARE_AUTOMATIC\";\nexport const COMPARE_SIDE_BY_SIDE = \"COMPARE_SIDE_BY_SIDE\";\nexport const COMPARE_SLIDER_RIGHT_LEFT = \"COMPARE_SLIDER_RIGHT_LEFT\";\nexport const COMPARE_CROSSFADE = \"COMPARE_CROSSFADE\";\n","import { createStore } from 'redux';\nimport reducer from './reducer';\nimport * as C from './constants';\nimport { getLastAccessibleStepIndex } from '../steps/Steps';\n\nexport type ImageData = string;\n\nexport interface State {\n  images: {\n    before: ImageState,\n    after: ImageState,\n  },\n  steps: {\n    current: number,\n    completed: number,\n  },\n  settings: {\n    imageSource: string,\n    screenshotFormat: \"png\" | \"jpeg\" | \"webp\",\n    preferredResolution: {\n      width: number,\n      height: number,\n    },\n  },\n  comparisonType: string,\n}\n\nexport interface ImageState {\n  data: ImageData | null,\n  updateCount: number,\n}\n\n\nconst DEFAULT_IMAGE_STATE = {\n  data: null,\n  updateCount: 0,\n};\n\nexport const fallbackState: State = {\n  images: {\n    before: DEFAULT_IMAGE_STATE,\n    after: DEFAULT_IMAGE_STATE,\n  },\n  steps: {\n    current: 0,\n    completed: getLastAccessibleStepIndex(0),\n  },\n  settings: {\n    imageSource: C.SOURCE_WEBCAM,\n    screenshotFormat: \"png\",\n    preferredResolution: {\n      width: 1920,\n      height: 1080,\n    },\n  },\n  comparisonType: C.COMPARE_AUTOMATIC,\n}\n\nlet devTools = undefined;\nif ((window as any).__REDUX_DEVTOOLS_EXTENSION__) {\n  // Redux dev tools are available\n  let devToolOptions = {\n    trace: false,\n    traceLimit: 25\n  };\n  devTools = (window as any).__REDUX_DEVTOOLS_EXTENSION__(devToolOptions);\n}\n\nconst store = createStore(reducer, fallbackState, devTools);\nexport default store;\n","import store, { ImageData } from './store';\nimport * as C from './constants';\n\n\n// dispatch\nconst d = store.dispatch;\n\n// actions\nexport interface ActionWithoutPayload {\n  type: string,\n}\n\nexport interface SetImageAction {\n  type: string,\n  payload: {\n    imageName: string,\n    imageData: ImageData,\n  },\n}\n\nexport interface GoToStepAction {\n  type: string,\n  payload: number,\n}\n\nexport interface StringPayloadAction {\n  type: string,\n  payload: string,\n}\n\nexport type Action = SetImageAction | ActionWithoutPayload | StringPayloadAction;\n\n// action creators\nexport function setBeforeImage(imageData: ImageData): SetImageAction {\n  return setImage(C.BEFORE_IMAGE, imageData);\n}\n\nexport function setAfterImage(imageData: ImageData): SetImageAction {\n  return setImage(C.AFTER_IMAGE, imageData);\n}\n\nexport function setComparisonType(value: string) {\n  d({\n    type: C.SET_COMPARE_TYPE,\n    payload: value,\n  });\n}\n\nfunction setImage(imageName: string, imageData: ImageData): SetImageAction {\n  return {\n    type: C.SET_IMAGE,\n    payload: {\n      imageName: imageName,\n      imageData: imageData,\n    },\n  };\n}\n\nexport function completedCurrentStep(): ActionWithoutPayload {\n  return { type: C.COMPLETE_STEP };\n}\n\nexport function goToStep(step: number): GoToStepAction {\n  return { type: C.GO_TO_STEP, payload: step };\n}\n\nexport function setImageSource(value: string): StringPayloadAction {\n  return { type: C.SET_IMAGE_SOURCE, payload: value };\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State as ReduxState } from './redux/store';\nimport { goToStep } from './redux/actions';\nimport { STEPS, StepData } from './steps/Steps';\n\n\ninterface Props {\n  lastSelectableStep: number,\n  currentStep: number,\n  goToStep: (index: number) => void,\n  completeStep: () => void,\n}\n\nclass StepDisplay extends React.Component<Props> {\n  render() {\n    return (\n      <ul className=\"step-list\">\n        {STEPS.map(this.renderStep)}\n      </ul>\n    );\n  }\n\n  renderStep = (step: StepData) => {\n    let classes = [\"step\"];\n    let onClick;\n    if (step.number <= this.props.lastSelectableStep) {\n      if (step.number === this.props.currentStep) {\n        classes.push(\"selected\");\n      } else {\n        classes.push(\"selectable\");\n        onClick = () => this.props.goToStep(step.number);\n      }\n    } else {\n      classes.push(\"disabled\");\n    }\n    return <li className={classes.join(\" \")} key={step.number} onClick={onClick}>\n      {step.name}\n    </li>;\n  }\n}\n\nconst mapStateToProps = (state: ReduxState, ownProps: any) => {\n  return {\n    ...ownProps,\n    lastSelectableStep: state.steps.completed,\n    currentStep: state.steps.current,\n  };\n};\nconst mapDispatchToProps = (dispatch: any) => {\n  return {\n    goToStep: (index: number) => dispatch(goToStep(index)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StepDisplay);\n","import React from 'react';\n\nexport default function DownloadImageButton(props: Props) {\n  return <a className=\"download-button\"\n    href={props.imageData}\n    download={props.fileName} >\n    {props.buttonText}\n  </a>\n}\n\ninterface Props {\n  imageData: string,\n  fileName: string,\n  buttonText: string,\n}\n","import React from 'react';\nimport { compare } from 'resemblejs';\nimport { ImageData } from '../redux/store';\nimport DownloadImageButton from '../DownloadImageButton';\n\n\ninterface Props {\n  beforeImage: ImageData,\n  afterImage: ImageData,\n}\n\ninterface State {\n  diffImage: ImageData | null,\n  errorMessage: string | null,\n}\n\nexport default class AutomaticCompare extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      diffImage: null,\n      errorMessage: null,\n    };\n  }\n\n  render() {\n    if (this.state.errorMessage) {\n      return <div>{this.state.errorMessage}</div>\n    }\n\n    if (this.state.diffImage) {\n      return <div className=\"diff-view\">\n        <img src={this.state.diffImage} alt=\"Differences between the before and after pictures\" />\n        <DownloadImageButton\n          buttonText=\"Download comparison image\"\n          fileName=\"before-after-compare.png\"\n          imageData={this.state.diffImage} />\n      </div>\n    } else {\n      this.calculateDiffImage();\n      return <div>Comparing images...</div>\n    }\n  }\n\n  calculateDiffImage() {\n    const after = this.props.afterImage;\n    const before = this.props.beforeImage;\n    if (after && before) {\n      const options = {\n        output: {\n          errorType: \"movementDifferenceIntensity\",\n          // transparency: 0.7, // this makes the downloaded image transparent\n          largeImageThreshold: 1500,\n          useCrossOrigin: false,\n          outputDiff: true\n        },\n        scaleToSameSize: true,\n        ignore: \"colors\",\n      };\n      compare(before, after, options, this.resembleCallback);\n    } else {\n      this.setState({\n        errorMessage: \"Before or after image is empty or undefined\",\n      });\n    }\n  }\n\n  resembleCallback = (error: any, data: any) => {\n    if (error) {\n      console.error(\"An error occured while comparing the images: \", error);\n      this.setState({\n        errorMessage: `An error occured while comparing the images: ${error}`\n      });\n    } else {\n      const imageData: string = data.getImageDataUrl();\n      this.setState({\n        diffImage: imageData\n      });\n    }\n  }\n}\n","import React from 'react';\nimport ReactCompareImage from 'react-compare-image';\n\nexport default function LeftRightSlider(props: Props) {\n  return <div className=\"image-diff left-right-slider\">\n    <div className=\"text\">\n      Move the slider around to compare the images.\n    </div>\n    <ReactCompareImage\n      leftImage={props.beforeImage}\n      leftImageLabel=\"Before\"\n      rightImage={props.afterImage}\n      rightImageLabel=\"After\"\n      sliderLineColor=\"red\"\n      handle={<React.Fragment />}\n    />\n  </div>\n}\n\ninterface Props {\n  beforeImage: string,\n  afterImage: string,\n}\n","import React from \"react\";\nimport Slider from 'rc-slider';\nimport 'rc-slider/assets/index.css';\n\nconst MySlider = Slider as any;\n\nexport default class CrossfadeCompare extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      sliderValue: 50,\n    };\n  }\n\n  render() {\n    return <div className=\"img-diff crossfade\">\n      <div className=\"slider-div\">\n        <span>Before</span>\n        <MySlider\n          min={0}\n          max={100}\n          value={this.state.sliderValue}\n          onChange={this.onOpacityChange}\n        />\n        <span>After</span>\n      </div>\n      <div className=\"overlay-container\">\n        <img src={this.props.beforeImage} alt=\"\" />\n        <img className=\"on-top\" src={this.props.afterImage} alt=\"\"\n          style={{ opacity: this.state.sliderValue / 100 }} />\n      </div>\n    </div>\n  }\n\n  onOpacityChange = (value: number) => {\n    if (value !== this.state.sliderValue) {\n      this.setState({ sliderValue: value })\n    }\n  }\n}\n\ninterface Props {\n  beforeImage: string,\n  afterImage: string,\n}\n\ninterface State {\n  sliderValue: number,\n}\n","import React from 'react';\n\nexport default class DropdownChooser extends React.Component<Props> {\n  render() {\n    let options = [...this.props.optionMap.entries()];\n    return <select value={this.props.value} onChange={this.onChange}>\n      {options.map(([key, value]) => <option key={key} value={key}>{value}</option>)}\n    </select>\n  }\n\n  onChange = (e: any) => {\n    this.props.onValueChange(e.target.value);\n  }\n}\n\ninterface Props {\n  value: string,\n  onValueChange: (value: string) => void,\n  optionMap: Map<string, string>,//keys -> labels\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State as ReduxState, ImageData } from './redux/store';\nimport { setComparisonType } from './redux/actions';\nimport * as C from './redux/constants';\nimport AutomaticCompare from './compare-images/AutomaticCompare';\nimport LeftRightSlider from './compare-images/LeftRightSlider';\nimport CrossfadeCompare from './compare-images/CrossfadeCompare';\nimport Dropdown from './Dropdown';\n\nconst TYPES = new Map<string, string>();\nTYPES.set(C.COMPARE_AUTOMATIC, \"Automatic\");\nTYPES.set(C.COMPARE_SLIDER_RIGHT_LEFT, \"Slider: Right - Left\");\nTYPES.set(C.COMPARE_CROSSFADE, \"Crossfade\");\n// TYPES.set(C.COMPARE_SIDE_BY_SIDE, \"Side by side\");\n\n\ninterface Props {\n  beforeImage: ImageData | null,\n  afterImage: ImageData | null,\n  type: string,\n}\n\nclass ImageCompareView extends React.Component<Props> {\n  render() {\n    return <div className=\"diff-view\">\n      <h2>Comparison</h2>\n        Type: <Dropdown\n        optionMap={TYPES}\n        value={this.props.type}\n        onValueChange={(x) => setComparisonType(x)} />\n      {this.renderContents()}\n    </div>\n  }\n\n  renderContents() {\n    const before = this.props.beforeImage;\n    const after = this.props.afterImage;\n    if (!before || !after) {\n      return <div>Error: Before or after image is missing. This is probably a bug!</div>\n    }\n    switch (this.props.type) {\n      case C.COMPARE_AUTOMATIC:\n        return <AutomaticCompare beforeImage={before} afterImage={after} />\n      case C.COMPARE_CROSSFADE:\n        return <CrossfadeCompare beforeImage={before} afterImage={after} />\n      case C.COMPARE_SLIDER_RIGHT_LEFT:\n        return <LeftRightSlider beforeImage={before} afterImage={after} />\n      default:\n        return <div>Unknown type: {this.props.type}</div>\n    }\n  }\n}\n\nconst mapStateToProps = (state: ReduxState, ownProps: any) => {\n  return {\n    ...ownProps,\n    beforeImage: state.images.before.data,\n    afterImage: state.images.after.data,\n    type: state.comparisonType,\n  };\n};\n\nexport default connect(mapStateToProps)(ImageCompareView);\n","import React from 'react';\n\nclass InstructionsView extends React.Component {\n  render() {\n    return (\n      <div className=\"instructions\">\n        <h2>How it works</h2>\n        <p>\n          This web application lets you detect if someone messed with your stuff. It does this by comparing pictures taken before and after you left it unsupervised.\n          Then it highlights any differences it has found.\n          (You could also use it to mess with peoples stuff and make sure that you leave it exactly like they left it. But don't do that: it's evil)\n        </p>\n        <h2>Instructions</h2>\n        <ol>\n          <li>Read these instructions</li>\n          <li>Select the settings you want to use</li>\n          <li>Take a image before you leave</li>\n          <li>Keep this website open (or download/save the image)</li>\n          <li>Take an image after you return. By default the image from before will be superimposed over the camera view to help you find the same angle / distance again</li>\n          <li>Check areas with detected changes (marked in pink)</li>\n        </ol>\n      </div>\n    );\n  }\n}\n\nexport default InstructionsView;\n","import React from 'react';\n\nclass ChooseOptionView extends React.Component<Props> {\n  static defaultValue(): string {\n    return \"\";\n  }\n\n  render() {\n    return (<select onChange={this.onChange} value={this.props.value}>\n      <option value=\"\" key={-1} disabled hidden>\n        {this.props.prompt ? this.props.prompt : \"Choose a option\"}\n      </option>\n      {this.props.options.map((value: string, i: number) => {\n        // Here using key=index should be ok, since the order should not change\n        return <option value={value} key={i}>{value}</option>;\n      })}\n    </select>);\n  }\n\n  onChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    this.props.onChange(event.target.value);\n  }\n}\n\nexport interface Props {\n  prompt?: string,\n  value: string,\n  options: string[],\n  onChange: (newValue: string) => void,\n}\n\nexport default ChooseOptionView;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State as ReduxState } from './redux/store';\nimport { setImageSource } from './redux/actions';\nimport { SOURCE_WEBCAM, SOURCE_FILE } from './redux/constants';\nimport OptionView from './OptionView';\n\n\nconst SOURCES = [SOURCE_WEBCAM, SOURCE_FILE];\n\ninterface Props {\n  imageSource: string,\n  setImageSource: (value: string) => void,\n}\n\nclass SettingsView extends React.Component<Props> {\n  render() {\n    return (\n      <div className=\"settings\">\n        <h2>Settings</h2>\n        <span className=\"label\">Image source:</span>\n        <OptionView options={SOURCES} value={this.props.imageSource} onChange={this.props.setImageSource} />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: ReduxState, ownProps: any) => {\n  return {\n    ...ownProps,\n    imageSource: state.settings.imageSource,\n  };\n};\nconst mapDispatchToProps = (dispatch: any) => {\n  return {\n    setImageSource: (value: string) => dispatch(setImageSource(value)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SettingsView);\n","import React from 'react';\nimport Webcam from \"react-webcam\";\nimport store, { ImageData } from './redux/store';\n\ninterface Props {\n  backgroundImage?: ImageData,\n  onPhoto: (image: ImageData) => void,\n}\n\nclass TakeImageView extends React.Component<Props> {\n  webcamRef: React.RefObject<any>;\n\n  constructor(props: Props) {\n    super(props);\n    this.webcamRef = React.createRef();\n  }\n\n  render() {\n    const bgImg = this.props.backgroundImage;\n    const className = \"take-image-div\" + (bgImg ? \" transparent-cam\" : \"\");\n    const screenshotFormat = store.getState().settings.screenshotFormat;\n    const resolution = store.getState().settings.preferredResolution;\n    const VIDEO_CONSTRAINTS = {\n      facingMode: { ideal: \"environment\" },\n      width: { ideal: resolution.width },\n      height: { ideal: resolution.height },\n    };\n\n    return (\n      <div className={className}>\n        <Webcam ref={this.webcamRef} className=\"cam\" onClick={this.onClick}\n          audio={false} videoConstraints={VIDEO_CONSTRAINTS}\n          forceScreenshotSourceSize={true}\n          screenshotFormat={`image/${screenshotFormat}` as any} />\n        {bgImg ? <img src={bgImg} alt=\"\" onClick={this.onClick} /> : null}\n      </div>\n    );\n  }\n\n  onClick = (event: any) => {\n    let photo = this.webcamRef.current.getScreenshot();\n    this.props.onPhoto(photo);\n  }\n}\n\nexport default TakeImageView;\n","import React from 'react';\n\ninterface Props {\n  setImage: (imageDataUrl: string) => void,\n}\n\ninterface State {\n}\n\nclass ImageUrlUploader extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    return (\n      <input className=\"image-upload\" type='file' onChange={this.onChange} />\n    );\n  }\n\n  onChange = (e: any) => {\n    const files = e.target.files;\n    if (files && files[0]) {\n      var fileReader = new FileReader();\n      fileReader.onload = this.onFileUploaded;\n      fileReader.readAsDataURL(files[0]);\n    }\n    e.target.value = null;//clear the input; SEE https://stackoverflow.com/questions/42192346/how-to-reset-reactjs-file-input\n  }\n\n  onFileUploaded = (event: any) => {\n    this.props.setImage(event.target.result);\n  }\n}\n\nexport default ImageUrlUploader;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport store, { State as ReduxState, ImageData } from './redux/store';\nimport { SOURCE_WEBCAM, SOURCE_FILE } from './redux/constants';\nimport TakeImageView from './TakeImageView';\nimport ImageUpload from './ImageUpload';\nimport DownloadImageButton from './DownloadImageButton';\n\n\ninterface Props {\n  imageSource: string,\n  currentImage: string | null,\n  onImage: (image: ImageData) => void,\n  backgroundImage?: ImageData,\n}\n\nclass GetImageView extends React.Component<Props> {\n  render() {\n    return (\n      <div className=\"get-image\">\n        {this.renderContents()}\n      </div>\n    );\n  }\n\n  renderContents() {\n    switch (this.props.imageSource) {\n      case SOURCE_WEBCAM:\n        return <div>\n          <h2>Take a photo</h2>\n          Allow camera access and touch/click the image below.\n          <TakeImageView onPhoto={this.props.onImage} backgroundImage={this.props.backgroundImage} />\n\n          {this.renderDownloadButton()}\n        </div>\n      case SOURCE_FILE:\n        return <div>\n          <h2>Upload an image</h2>\n          <ImageUpload setImage={this.props.onImage} />\n        </div>\n      default:\n        throw new Error(`Unknown image source: \"${this.props.imageSource}\"`);\n    };\n  }\n\n  renderDownloadButton() {\n    if (this.props.currentImage) {\n      let screenshotFormat = store.getState().settings.screenshotFormat;\n      return <DownloadImageButton\n        buttonText=\"Download last image taken\"\n        fileName={`webcam-image.${screenshotFormat}`}\n        imageData={this.props.currentImage} />\n    }\n  }\n}\n\n\nconst mapStateToProps = (state: ReduxState, ownProps: any) => {\n  return {\n    ...ownProps,\n    imageSource: state.settings.imageSource,\n  };\n};\nconst mapDispatchToProps = (dispatch: any) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GetImageView);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport ImageCompareView from './ImageCompareView';\nimport InstructionView from './steps/Instructions';\nimport SettingsView from './SettingsView';\nimport GetImageView from './GetImage';\nimport { State as ReduxState, ImageData } from './redux/store';\nimport { setAfterImage, setBeforeImage, completedCurrentStep } from './redux/actions';\nimport * as Steps from './steps/Steps';\n\n\ninterface Props {\n  setAfterImage: (imageData: ImageData) => void,\n  setBeforeImage: (imageData: ImageData) => void,\n  completeStep: () => void,\n  beforeImageData: ImageData | null,\n  afterImageData: ImageData | null,\n  step: number,\n}\n\ninterface State {\n}\n\nclass StepContentView extends React.Component<Props, State> {\n  render() {\n    return (\n      <div className=\"step-content\">\n        {this.renderContents()}\n      </div>\n    );\n  }\n\n  renderContents() {\n    switch (this.props.step) {\n      case Steps.STEP_INTRO:\n        return this.renderWithNextButton(<InstructionView />);\n      case Steps.STEP_SETTINGS:\n        return this.renderWithNextButton(<SettingsView />);\n      case Steps.STEP_BEFORE_PHOTO:\n        return <GetImageView\n          onImage={this.takeBeforeImage}\n          currentImage={this.props.beforeImageData} />\n      case Steps.STEP_AFTER_PHOTO:\n        return <GetImageView\n          onImage={this.takeAfterImage}\n          currentImage={this.props.afterImageData}\n          backgroundImage={this.props.beforeImageData} />\n      case Steps.STEP_COMPARE:\n        return <ImageCompareView />\n      default:\n        return <span>Error: Unknown step</span>\n    }\n  }\n\n  takeBeforeImage = (image: ImageData) => {\n    this.props.setBeforeImage(image);\n    this.props.completeStep();\n  }\n\n  takeAfterImage = (image: ImageData) => {\n    this.props.setAfterImage(image);\n    this.props.completeStep();\n  }\n\n  renderWithNextButton(component: any) {\n    return (<div>\n      {component}\n      <button className=\"next-button\" onClick={this.props.completeStep}>\n        Next step\n      </button>\n    </div>);\n  }\n}\n\n\nconst mapStateToProps = (state: ReduxState, ownProps: any) => {\n  return {\n    ...ownProps,\n    beforeImageData: state.images.before.data,\n    afterImageData: state.images.after.data,\n    step: state.steps.current,\n  };\n};\n\nconst mapDispatchToProps = (dispatch: any) => {\n  return {\n    setBeforeImage: (imageData: ImageData) => dispatch(setBeforeImage(imageData)),\n    setAfterImage: (imageData: ImageData) => dispatch(setAfterImage(imageData)),\n    completeStep: () => dispatch(completedCurrentStep()),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StepContentView);\n","import React from 'react';\nimport StepDisplay from './StepDisplay';\nimport StepContent from './StepContentDisplay';\nimport '../css/main.scss';\n\n// --------------------------- TODOs -------------------------------\n// add screen inbetween before and after that turns the camera off\n// let user choose webcam resolution\n// improve instructions\n// why is it so slow on my smartphone? are 3 ~20MB pictures so hard to handle? :p\n// Make it look ok on a smartphone\n// [opt] add settings persistence: local storage, url?\n//  -> maybe add an url parameter + chooser pattern so it can be saved\n// [opt] find out how to use key events?\n// -----------------------------------------------------------------\n\nclass MainView extends React.Component {\n  render() {\n    return (\n      <div>\n        <div className=\"err-msg\">\n          This website is still in pre alpha state. It is likely instable, buggy, ugly and might get broken from time to time.\n        </div>\n        <div className=\"app-contents\">\n          <StepDisplay />\n          <StepContent />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default MainView;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\nimport App from './app/Main';\nimport * as serviceWorker from './serviceWorker';\nimport store from './app/redux/store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\n// const isLocalhost = Boolean(\n//   window.location.hostname === 'localhost' ||\n//     // [::1] is the IPv6 localhost address.\n//     window.location.hostname === '[::1]' ||\n//     // 127.0.0.0/8 are considered localhost for IPv4.\n//     window.location.hostname.match(\n//       /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n//     )\n// );\n//\n// export function register(config: any) {\n//   if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n//     // The URL constructor is available in all browsers that support SW.\n//     const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n//     if (publicUrl.origin !== window.location.origin) {\n//       // Our service worker won't work if PUBLIC_URL is on a different origin\n//       // from what our page is served on. This might happen if a CDN is used to\n//       // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n//       return;\n//     }\n//\n//     window.addEventListener('load', () => {\n//       const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n//\n//       if (isLocalhost) {\n//         // This is running on localhost. Let's check if a service worker still exists or not.\n//         checkValidServiceWorker(swUrl, config);\n//\n//         // Add some additional logging to localhost, pointing developers to the\n//         // service worker/PWA documentation.\n//         navigator.serviceWorker.ready.then(() => {\n//           console.log(\n//             'This web app is being served cache-first by a service ' +\n//               'worker. To learn more, visit https://bit.ly/CRA-PWA'\n//           );\n//         });\n//       } else {\n//         // Is not localhost. Just register service worker\n//         registerValidSW(swUrl, config);\n//       }\n//     });\n//   }\n// }\n//\n// function registerValidSW(swUrl, config) {\n//   navigator.serviceWorker\n//     .register(swUrl)\n//     .then(registration => {\n//       registration.onupdatefound = () => {\n//         const installingWorker = registration.installing;\n//         if (installingWorker == null) {\n//           return;\n//         }\n//         installingWorker.onstatechange = () => {\n//           if (installingWorker.state === 'installed') {\n//             if (navigator.serviceWorker.controller) {\n//               // At this point, the updated precached content has been fetched,\n//               // but the previous service worker will still serve the older\n//               // content until all client tabs are closed.\n//               console.log(\n//                 'New content is available and will be used when all ' +\n//                   'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n//               );\n//\n//               // Execute callback\n//               if (config && config.onUpdate) {\n//                 config.onUpdate(registration);\n//               }\n//             } else {\n//               // At this point, everything has been precached.\n//               // It's the perfect time to display a\n//               // \"Content is cached for offline use.\" message.\n//               console.log('Content is cached for offline use.');\n//\n//               // Execute callback\n//               if (config && config.onSuccess) {\n//                 config.onSuccess(registration);\n//               }\n//             }\n//           }\n//         };\n//       };\n//     })\n//     .catch(error => {\n//       console.error('Error during service worker registration:', error);\n//     });\n// }\n//\n// function checkValidServiceWorker(swUrl, config) {\n//   // Check if the service worker can be found. If it can't reload the page.\n//   fetch(swUrl, {\n//     headers: { 'Service-Worker': 'script' },\n//   })\n//     .then(response => {\n//       // Ensure service worker exists, and that we really are getting a JS file.\n//       const contentType = response.headers.get('content-type');\n//       if (\n//         response.status === 404 ||\n//         (contentType != null && contentType.indexOf('javascript') === -1)\n//       ) {\n//         // No service worker found. Probably a different app. Reload the page.\n//         navigator.serviceWorker.ready.then(registration => {\n//           registration.unregister().then(() => {\n//             window.location.reload();\n//           });\n//         });\n//       } else {\n//         // Service worker found. Proceed as normal.\n//         registerValidSW(swUrl, config);\n//       }\n//     })\n//     .catch(() => {\n//       console.log(\n//         'No internet connection found. App is running in offline mode.'\n//       );\n//     });\n// }\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n"],"sourceRoot":""}